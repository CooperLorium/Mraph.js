---
import Example from "../../layouts/Example.astro";
---

<Example title="Rubik's Cube">
    <script>
        import * as mp from "../../../src/mraph.js";
        const layer = new mp.Layer().appendTo(document.body);
        const gl = layer.renderer.gl;

        const mesh = await mp.OBJLoader.parseToGeometry(
            "/Mraph.js/Rubik's Cube.obj"
        );
        mesh.material = new mp.LambertMaterial();
        mesh.material.colorMode = "texture";
        layer.add(mesh);

        const pointLight = new mp.PointLight({
            position: new mp.Vector(1, 3, 7),
            intensity: 0.5,
        });
        layer.add(pointLight);

        const texture = new mp.Texture(gl);
        const img = new Image();
        img.src = "/Mraph.js/Rubik's Cube.png";
        img.onload = () => {
            texture.image = img;
            texture.magFilter = mp.GLENUM.NEAREST;
            texture.upload();
        };

        layer.camera.position[2] = 3;
        layer.enableOrbitControl();
        layer.play();
    </script>
</Example>
